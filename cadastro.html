<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Vagas ETE - Cadastre seu currículo e encontre as melhores oportunidades" />
    <title>Cadastro de Currículo - Vagas ETE</title>
    <link rel="stylesheet" href="./css/estilo.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* Estilos específicos para a página de currículo */
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--border-color);
            z-index: 1;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--border-color);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .step-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }
        
        .progress-step.active .step-number {
            background-color: var(--accent);
            color: white;
        }
        
        .progress-step.completed .step-number {
            background-color: var(--success);
            color: white;
        }
        
        .form-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .form-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-header {
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }
        
        .dynamic-list {
            margin-bottom: 1.5rem;
        }
        
        .dynamic-item {
            background-color: var(--surface);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
        }
        
        .remove-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .add-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            gap: 1rem;
        }
        
        .form-actions button {
            flex: 1;
        }
        
        .preview-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .preview-header {
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 1rem;
        }
        
        .preview-section {
            margin-bottom: 1.5rem;
        }
        
        .preview-section h3 {
            color: var(--accent);
            margin-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.25rem;
        }
        
        .preview-item {
            margin-bottom: 1rem;
        }
        
        .preview-item:last-child {
            margin-bottom: 0;
        }
        
        .preview-item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
        }
        
        .skills-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .skill-tag {
            background-color: var(--accent-light);
            color: var(--accent);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .hidden {
            display: none;
        }
        
        .success-message {
            background-color: var(--success-light);
            color: var(--success);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .progress-bar {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .progress-step {
                flex: 1;
                min-width: 80px;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="logo" aria-label="Vagas ETE">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path
                        d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"
                    />
                </svg>
                <span>Vagas ETE</span>
            </div>

            <button
                class="mobile-menu-btn"
                aria-label="Abrir menu"
                onclick="toggleMenu()"
            >
                ☰
            </button>

            <ul class="nav-links" id="navLinks" role="menubar">
                <li><a href="index.html#home">Início</a></li>
                <li><a href="index.html#vagas">Vagas</a></li>
                <li><a href="index.html#sobre">Sobre</a></li>
                <li><a href="index.html#contato">Contato</a></li>
                <li><a href="index.html#entrar">Entrar</a></li>
                <li><a href="index.html#cadastrar" class="btn-primary">Cadastrar</a></li>
                <li>
                    <button
                        class="theme-toggle"
                        id="themeToggle"
                        onclick="toggleTheme()"
                        aria-label="Alternar tema"
                    >
                        ☀️
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="cadastro-curriculo">
            <div class="hero-content" style="padding: 2rem 0;">
                <div class="hero-text" style="text-align: center;">
                    <h1 id="hero-title">Cadastre seu Currículo</h1>
                    <p>Preencha suas informações para aumentar suas chances nas melhores oportunidades</p>
                </div>
            </div>

            <div class="progress-bar" id="progressBar">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Dados Pessoais</div>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Experiência</div>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Formação</div>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Habilidades</div>
                </div>
                <div class="progress-step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Revisão</div>
                </div>
            </div>

            <div id="successMessage" class="success-message hidden">
                Currículo cadastrado com sucesso! Você será redirecionado em breve.
            </div>

            <form id="curriculumForm" novalidate>
                <!-- Seção 1: Dados Pessoais -->
                <div class="form-section active" id="section1" data-step="1">
                    <div class="section-header">
                        <h2>Dados Pessoais</h2>
                        <p>Informações básicas para contato</p>
                    </div>

                    <div class="search-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fullName">Nome Completo *</label>
                                <input
                                    id="fullName"
                                    type="text"
                                    placeholder="Seu nome completo"
                                    required
                                />
                                <small class="error-message" data-for="fullName"></small>
                            </div>
                            <div class="form-group">
                                <label for="email">E-mail *</label>
                                <input
                                    id="email"
                                    type="email"
                                    placeholder="seu@email.com"
                                    required
                                />
                                <small class="error-message" data-for="email"></small>
                            </div>
                            <div class="form-group">
                                <label for="phone">Telefone *</label>
                                <input
                                    id="phone"
                                    type="tel"
                                    placeholder="(00) 00000-0000"
                                    required
                                />
                                <small class="error-message" data-for="phone"></small>
                            </div>
                            <div class="form-group">
                                <label for="location">Localização *</label>
                                <input
                                    id="location"
                                    type="text"
                                    placeholder="Cidade, Estado"
                                    required
                                />
                                <small class="error-message" data-for="location"></small>
                            </div>
                            <div class="form-group full-width">
                                <label for="professionalObjective">Objetivo Profissional</label>
                                <textarea
                                    id="professionalObjective"
                                    rows="4"
                                    placeholder="Descreva brevemente seus objetivos profissionais e área de interesse"
                                ></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" disabled>Anterior</button>
                        <button type="button" class="btn-primary" id="nextToSection2">Próximo</button>
                    </div>
                </div>

                <!-- Seção 2: Experiência Profissional -->
                <div class="form-section" id="section2" data-step="2">
                    <div class="section-header">
                        <h2>Experiência Profissional</h2>
                        <p>Adicione suas experiências de trabalho mais relevantes</p>
                    </div>

                    <div class="dynamic-list" id="experienceList">
                        <!-- Experiências serão adicionadas dinamicamente aqui -->
                    </div>

                    <button type="button" class="add-btn" id="addExperience">
                        <span>+</span> Adicionar Experiência
                    </button>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToSection1">Anterior</button>
                        <button type="button" class="btn-primary" id="nextToSection3">Próximo</button>
                    </div>
                </div>

                <!-- Seção 3: Formação Acadêmica -->
                <div class="form-section" id="section3" data-step="3">
                    <div class="section-header">
                        <h2>Formação Acadêmica</h2>
                        <p>Adicione sua formação e cursos</p>
                    </div>

                    <div class="dynamic-list" id="educationList">
                        <!-- Formações serão adicionadas dinamicamente aqui -->
                    </div>

                    <button type="button" class="add-btn" id="addEducation">
                        <span>+</span> Adicionar Formação
                    </button>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToSection2">Anterior</button>
                        <button type="button" class="btn-primary" id="nextToSection4">Próximo</button>
                    </div>
                </div>

                <!-- Seção 4: Habilidades e Idiomas -->
                <div class="form-section" id="section4" data-step="4">
                    <div class="section-header">
                        <h2>Habilidades e Idiomas</h2>
                        <p>Adicione suas competências e conhecimentos de idiomas</p>
                    </div>

                    <div class="search-form">
                        <div class="form-group">
                            <label for="skills">Habilidades e Competências</label>
                            <input
                                id="skills"
                                type="text"
                                placeholder="Ex: JavaScript, Gestão de Projetos, Photoshop"
                            />
                            <small>Separe as habilidades com vírgulas</small>
                        </div>

                        <div class="dynamic-list" id="languagesList">
                            <!-- Idiomas serão adicionados dinamicamente aqui -->
                        </div>

                        <button type="button" class="add-btn" id="addLanguage">
                            <span>+</span> Adicionar Idioma
                        </button>

                        <div class="form-group">
                            <label for="certifications">Certificações e Cursos Complementares</label>
                            <textarea
                                id="certifications"
                                rows="4"
                                placeholder="Liste suas certificações e cursos relevantes"
                            ></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToSection3">Anterior</button>
                        <button type="button" class="btn-primary" id="nextToSection5">Próximo</button>
                    </div>
                </div>

                <!-- Seção 5: Revisão e Finalização -->
                <div class="form-section" id="section5" data-step="5">
                    <div class="section-header">
                        <h2>Revisão do Currículo</h2>
                        <p>Confirme todas as informações antes de finalizar</p>
                    </div>

                    <div class="preview-container" id="resumePreview">
                        <!-- Preview do currículo será gerado aqui -->
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="backToSection4">Anterior</button>
                        <button type="submit" class="btn-primary">Finalizar Cadastro</button>
                        <button type="button" class="btn-secondary" id="exportPdf">Exportar PDF</button>
                    </div>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Vagas ETE</h3>
                <p style="color: var(--text-secondary)">
                    Conectando talentos e oportunidades
                </p>
            </div>
            <div class="footer-section">
                <h3>Links</h3>
                <ul class="footer-links">
                    <li><a href="index.html#vagas">Vagas</a></li>
                    <li><a href="index.html#sobre">Sobre</a></li>
                    <li><a href="index.html#contato">Contato</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 Vagas ETE. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script src="./js/script.js"></script>
    <script>
        // Variáveis globais
        let currentStep = 1;
        const totalSteps = 5;
        
        // Templates para elementos dinâmicos
        const experienceTemplate = `
            <div class="dynamic-item">
                <button type="button" class="remove-btn" onclick="removeItem(this)">×</button>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Empresa *</label>
                        <input type="text" placeholder="Nome da empresa" required class="exp-company">
                    </div>
                    <div class="form-group">
                        <label>Cargo *</label>
                        <input type="text" placeholder="Seu cargo" required class="exp-position">
                    </div>
                    <div class="form-group">
                        <label>Data de Início *</label>
                        <input type="month" required class="exp-start-date">
                    </div>
                    <div class="form-group">
                        <label>Data de Término</label>
                        <input type="month" class="exp-end-date">
                        <div style="display: flex; align-items: center; margin-top: 0.5rem;">
                            <input type="checkbox" class="exp-current" onchange="toggleCurrentJob(this)">
                            <label style="margin-left: 0.5rem; font-size: 0.9rem;">Trabalho atual</label>
                        </div>
                    </div>
                    <div class="form-group full-width">
                        <label>Descrição</label>
                        <textarea rows="3" placeholder="Descreva suas responsabilidades e conquistas" class="exp-description"></textarea>
                    </div>
                </div>
            </div>
        `;
        
        const educationTemplate = `
            <div class="dynamic-item">
                <button type="button" class="remove-btn" onclick="removeItem(this)">×</button>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Instituição *</label>
                        <input type="text" placeholder="Nome da instituição" required class="edu-institution">
                    </div>
                    <div class="form-group">
                        <label>Curso *</label>
                        <input type="text" placeholder="Nome do curso" required class="edu-course">
                    </div>
                    <div class="form-group">
                        <label>Nível *</label>
                        <select required class="edu-level">
                            <option value="">Selecione</option>
                            <option>Ensino Médio</option>
                            <option>Técnico</option>
                            <option>Graduação</option>
                            <option>Pós-graduação</option>
                            <option>Mestrado</option>
                            <option>Doutorado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Data de Início *</label>
                        <input type="month" required class="edu-start-date">
                    </div>
                    <div class="form-group">
                        <label>Data de Término</label>
                        <input type="month" class="edu-end-date">
                        <div style="display: flex; align-items: center; margin-top: 0.5rem;">
                            <input type="checkbox" class="edu-current" onchange="toggleCurrentEducation(this)">
                            <label style="margin-left: 0.5rem; font-size: 0.9rem;">Cursando</label>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        const languageTemplate = `
            <div class="dynamic-item">
                <button type="button" class="remove-btn" onclick="removeItem(this)">×</button>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Idioma *</label>
                        <input type="text" placeholder="Ex: Inglês" required class="lang-name">
                    </div>
                    <div class="form-group">
                        <label>Nível *</label>
                        <select required class="lang-level">
                            <option value="">Selecione</option>
                            <option>Básico</option>
                            <option>Intermediário</option>
                            <option>Avançado</option>
                            <option>Fluente</option>
                            <option>Nativo</option>
                        </select>
                    </div>
                </div>
            </div>
        `;
        
        // Inicialização quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar primeira experiência e educação por padrão
            addExperience();
            addEducation();
            addLanguage();
            
            // Configurar navegação entre seções
            setupNavigation();
            
            // Configurar validação do formulário
            setupValidation();
            
            // Configurar preview em tempo real
            setupRealTimePreview();
        });
        
        // Configurar navegação entre seções
        function setupNavigation() {
            // Botões de próximo
            document.getElementById('nextToSection2').addEventListener('click', () => navigateToStep(2));
            document.getElementById('nextToSection3').addEventListener('click', () => navigateToStep(3));
            document.getElementById('nextToSection4').addEventListener('click', () => navigateToStep(4));
            document.getElementById('nextToSection5').addEventListener('click', () => navigateToStep(5));
            
            // Botões de anterior
            document.getElementById('backToSection1').addEventListener('click', () => navigateToStep(1));
            document.getElementById('backToSection2').addEventListener('click', () => navigateToStep(2));
            document.getElementById('backToSection3').addEventListener('click', () => navigateToStep(3));
            document.getElementById('backToSection4').addEventListener('click', () => navigateToStep(4));
            
            // Botão de exportar PDF
            document.getElementById('exportPdf').addEventListener('click', exportToPdf);
        }
        
        // Navegar para um passo específico
        function navigateToStep(step) {
            // Validar formulário atual antes de avançar
            if (step > currentStep && !validateCurrentSection()) {
                return;
            }
            
            // Atualizar passo atual
            currentStep = step;
            
            // Atualizar barra de progresso
            updateProgressBar();
            
            // Mostrar seção atual
            showSection(step);
        }
        
        // Atualizar barra de progresso
        function updateProgressBar() {
            const steps = document.querySelectorAll('.progress-step');
            
            steps.forEach(step => {
                const stepNumber = parseInt(step.getAttribute('data-step'));
                
                step.classList.remove('active', 'completed');
                
                if (stepNumber === currentStep) {
                    step.classList.add('active');
                } else if (stepNumber < currentStep) {
                    step.classList.add('completed');
                }
            });
        }
        
        // Mostrar seção específica
        function showSection(step) {
            // Esconder todas as seções
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Mostrar seção atual
            document.getElementById(`section${step}`).classList.add('active');
            
            // Atualizar preview se for a última seção
            if (step === 5) {
                updateResumePreview();
            }
        }
        
        // Validar seção atual
        function validateCurrentSection() {
            const currentSection = document.getElementById(`section${currentStep}`);
            const requiredFields = currentSection.querySelectorAll('[required]');
            let isValid = true;
            
            // Limpar mensagens de erro anteriores
            clearErrorMessages(currentSection);
            
            // Validar cada campo obrigatório
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    showError(field, 'Este campo é obrigatório');
                    isValid = false;
                } else if (field.type === 'email' && !isValidEmail(field.value)) {
                    showError(field, 'Por favor, insira um e-mail válido');
                    isValid = false;
                } else if (field.type === 'tel' && !isValidPhone(field.value)) {
                    showError(field, 'Por favor, insira um telefone válido');
                    isValid = false;
                }
            });
            
            return isValid;
        }
        
        // Configurar validação do formulário
        function setupValidation() {
            const form = document.getElementById('curriculumForm');
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validar todas as seções
                let allValid = true;
                
                for (let i = 1; i <= totalSteps; i++) {
                    if (!validateSection(i)) {
                        allValid = false;
                        // Navegar para a primeira seção com erro
                        if (allValid === false && i < currentStep) {
                            navigateToStep(i);
                        }
                    }
                }
                
                if (allValid) {
                    // Simular envio do formulário
                    submitForm();
                }
            });
        }
        
        // Validar seção específica
        function validateSection(step) {
            const section = document.getElementById(`section${step}`);
            const requiredFields = section.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                }
            });
            
            return isValid;
        }
        
        // Mostrar mensagem de erro
        function showError(field, message) {
            const errorElement = document.querySelector(`[data-for="${field.id}"]`);
            if (errorElement) {
                errorElement.textContent = message;
            }
            
            field.style.borderColor = 'var(--error)';
        }
        
        // Limpar mensagens de erro
        function clearErrorMessages(section) {
            const errorMessages = section.querySelectorAll('.error-message');
            errorMessages.forEach(msg => {
                msg.textContent = '';
            });
            
            const fields = section.querySelectorAll('input, select, textarea');
            fields.forEach(field => {
                field.style.borderColor = '';
            });
        }
        
        // Validar e-mail
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Validar telefone
        function isValidPhone(phone) {
            // Aceita formatos como (11) 99999-9999, 11 999999999, 11999999999
            const phoneRegex = /^(\(\d{2}\)\s?|\d{2}\s?)?\d{4,5}-?\d{4}$/;
            return phoneRegex.test(phone.replace(/\s/g, ''));
        }
        
        // Adicionar experiência
        function addExperience() {
            const experienceList = document.getElementById('experienceList');
            const newExperience = document.createElement('div');
            newExperience.innerHTML = experienceTemplate;
            experienceList.appendChild(newExperience);
        }
        
        // Adicionar educação
        function addEducation() {
            const educationList = document.getElementById('educationList');
            const newEducation = document.createElement('div');
            newEducation.innerHTML = educationTemplate;
            educationList.appendChild(newEducation);
        }
        
        // Adicionar idioma
        function addLanguage() {
            const languagesList = document.getElementById('languagesList');
            const newLanguage = document.createElement('div');
            newLanguage.innerHTML = languageTemplate;
            languagesList.appendChild(newLanguage);
        }
        
        // Remover item dinâmico
        function removeItem(button) {
            const item = button.closest('.dynamic-item');
            if (item && item.parentElement.children.length > 1) {
                item.remove();
            }
        }
        
        // Alternar trabalho atual
        function toggleCurrentJob(checkbox) {
            const endDateInput = checkbox.closest('.form-group').querySelector('.exp-end-date');
            endDateInput.disabled = checkbox.checked;
            
            if (checkbox.checked) {
                endDateInput.value = '';
            }
        }
        
        // Alternar educação atual
        function toggleCurrentEducation(checkbox) {
            const endDateInput = checkbox.closest('.form-group').querySelector('.edu-end-date');
            endDateInput.disabled = checkbox.checked;
            
            if (checkbox.checked) {
                endDateInput.value = '';
            }
        }
        
        // Configurar preview em tempo real
        function setupRealTimePreview() {
            // Adicionar event listeners para atualizar o preview quando os campos mudarem
            const form = document.getElementById('curriculumForm');
            form.addEventListener('input', function() {
                if (currentStep === 5) {
                    updateResumePreview();
                }
            });
        }
        
        // Atualizar preview do currículo
        function updateResumePreview() {
            const preview = document.getElementById('resumePreview');
            
            // Coletar dados do formulário
            const formData = collectFormData();
            
            // Gerar HTML do preview
            preview.innerHTML = generatePreviewHTML(formData);
        }
        
        // Coletar dados do formulário
        function collectFormData() {
            return {
                // Dados pessoais
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                professionalObjective: document.getElementById('professionalObjective').value,
                
                // Experiências
                experiences: getExperiences(),
                
                // Formação
                education: getEducation(),
                
                // Habilidades
                skills: document.getElementById('skills').value.split(',').map(s => s.trim()).filter(s => s),
                
                // Idiomas
                languages: getLanguages(),
                
                // Certificações
                certifications: document.getElementById('certifications').value
            };
        }
        
        // Obter experiências
        function getExperiences() {
            const experiences = [];
            const experienceItems = document.querySelectorAll('#experienceList .dynamic-item');
            
            experienceItems.forEach(item => {
                experiences.push({
                    company: item.querySelector('.exp-company').value,
                    position: item.querySelector('.exp-position').value,
                    startDate: item.querySelector('.exp-start-date').value,
                    endDate: item.querySelector('.exp-end-date').value,
                    current: item.querySelector('.exp-current').checked,
                    description: item.querySelector('.exp-description').value
                });
            });
            
            return experiences;
        }
        
        // Obter formação
        function getEducation() {
            const education = [];
            const educationItems = document.querySelectorAll('#educationList .dynamic-item');
            
            educationItems.forEach(item => {
                education.push({
                    institution: item.querySelector('.edu-institution').value,
                    course: item.querySelector('.edu-course').value,
                    level: item.querySelector('.edu-level').value,
                    startDate: item.querySelector('.edu-start-date').value,
                    endDate: item.querySelector('.edu-end-date').value,
                    current: item.querySelector('.edu-current').checked
                });
            });
            
            return education;
        }
        
        // Obter idiomas
        function getLanguages() {
            const languages = [];
            const languageItems = document.querySelectorAll('#languagesList .dynamic-item');
            
            languageItems.forEach(item => {
                languages.push({
                    name: item.querySelector('.lang-name').value,
                    level: item.querySelector('.lang-level').value
                });
            });
            
            return languages;
        }
        
        // Gerar HTML do preview
        function generatePreviewHTML(data) {
            return `
                <div class="preview-header">
                    <h1>${data.fullName || 'Seu Nome'}</h1>
                    <p>${data.location || 'Sua Localização'} | ${data.phone || 'Seu Telefone'} | ${data.email || 'Seu E-mail'}</p>
                </div>
                
                ${data.professionalObjective ? `
                <div class="preview-section">
                    <h3>Objetivo Profissional</h3>
                    <p>${data.professionalObjective}</p>
                </div>
                ` : ''}
                
                ${data.experiences.some(exp => exp.company || exp.position) ? `
                <div class="preview-section">
                    <h3>Experiência Profissional</h3>
                    ${data.experiences.map(exp => `
                        <div class="preview-item">
                            <div class="preview-item-header">
                                <strong>${exp.position || 'Cargo'}</strong>
                                <span>${formatDateRange(exp.startDate, exp.endDate, exp.current)}</span>
                            </div>
                            <div><em>${exp.company || 'Empresa'}</em></div>
                            ${exp.description ? `<p>${exp.description}</p>` : ''}
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                
                ${data.education.some(edu => edu.institution || edu.course) ? `
                <div class="preview-section">
                    <h3>Formação Acadêmica</h3>
                    ${data.education.map(edu => `
                        <div class="preview-item">
                            <div class="preview-item-header">
                                <strong>${edu.course || 'Curso'}</strong>
                                <span>${formatDateRange(edu.startDate, edu.endDate, edu.current)}</span>
                            </div>
                            <div><em>${edu.institution || 'Instituição'} - ${edu.level || 'Nível'}</em></div>
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                
                ${data.skills.length > 0 ? `
                <div class="preview-section">
                    <h3>Habilidades</h3>
                    <div class="skills-list">
                        ${data.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                </div>
                ` : ''}
                
                ${data.languages.some(lang => lang.name) ? `
                <div class="preview-section">
                    <h3>Idiomas</h3>
                    ${data.languages.map(lang => `
                        <div class="preview-item">
                            <strong>${lang.name}</strong>: ${lang.level || 'Nível'}
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                
                ${data.certifications ? `
                <div class="preview-section">
                    <h3>Certificações e Cursos</h3>
                    <p>${data.certifications.replace(/\n/g, '<br>')}</p>
                </div>
                ` : ''}
            `;
        }
        
        // Formatar intervalo de datas
        function formatDateRange(startDate, endDate, isCurrent) {
            if (!startDate) return '';
            
            const start = formatDate(startDate);
            const end = isCurrent ? 'Atual' : formatDate(endDate);
            
            return `${start} - ${end}`;
        }
        
        // Formatar data (MM/AAAA)
        function formatDate(dateString) {
            if (!dateString) return '';
            
            const [year, month] = dateString.split('-');
            return `${month}/${year}`;
        }
        
        // Exportar para PDF
        function exportToPdf() {
            const element = document.getElementById('resumePreview');
            const opt = {
                margin: 10,
                filename: 'curriculo.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(element).save();
        }
        
        // Submeter formulário
        function submitForm() {
            // Simular envio (em uma aplicação real, enviaria para um servidor)
            const successMessage = document.getElementById('successMessage');
            successMessage.classList.remove('hidden');
            
            // Redirecionar após alguns segundos
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 3000);
        }
        
        // Event listeners para os botões de adicionar
        document.getElementById('addExperience').addEventListener('click', addExperience);
        document.getElementById('addEducation').addEventListener('click', addEducation);
        document.getElementById('addLanguage').addEventListener('click', addLanguage);
    </script>
</body>
</html>